(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{8790:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/tableOfContents",function(){return r(9375)}])},9375:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return T}});var t=r(5893),l=r(7294),a=r(6693),i=r(2667),n=r(5675),d=r.n(n),c=r(5810),o=r(9420);let u={async create(e){let s=await (0,o.e)({url:"/courses",method:"POST",data:e});return s.data},async getCoursesLvl1(){let e=await (0,o.e)({url:"/courses",method:"GET"});return e.data},async getChildrenById(e){let s=await (0,o.e)({url:"/courses/parent/".concat(e),method:"GET"});return s.data},async getRecursiveChildren(e){let s=await (0,o.e)({url:"/courses/recursiveId/".concat(e),method:"GET"});return s.data},async update(e,s){let r=await (0,o.e)({url:"/courses/".concat(e),method:"PUT",data:s});return r.data},async remove(e){let s=await (0,o.e)({url:"/courses/".concat(e),method:"DELETE"});return s.data}};var h=r(7837);let m=(0,l.createContext)(null),x=()=>{let e=(0,l.useContext)(m);if(!e)throw Error('Can not run without "CourseProvider"');return e},p=e=>{let[s,r]=(0,l.useState)(null),[a,i]=(0,l.useState)(null),[n,d]=(0,l.useState)(null),[c,o]=(0,l.useState)(null),[x,p]=(0,l.useState)(null),[j,g]=(0,l.useState)(null),{data:f,isLoading:v,isError:y,refetch:b}=(0,h.a)(["get courses"],()=>u.getCoursesLvl1(),{staleTime:0,cacheTime:0}),{data:N,isLoading:w,isError:C,refetch:k}=(0,h.a)(["get course by id",a],()=>null===a?null:u.getChildrenById(a),{staleTime:0,cacheTime:0}),{data:S,isLoading:E,isError:F,refetch:T}=(0,h.a)(["get course by id",n],()=>null===n?null:u.getChildrenById(n),{staleTime:0,cacheTime:0}),{data:L,isLoading:B,isError:I,refetch:_}=(0,h.a)(["get course by id",c],()=>null===c?null:u.getChildrenById(c),{staleTime:0,cacheTime:0}),{data:P,isLoading:O,isError:Z,refetch:R}=(0,h.a)(["get course by id",x],()=>null===x?null:u.getChildrenById(x),{staleTime:0,cacheTime:0}),V=e=>{1==e?k():2==e?T():3==e?_():4==e&&R()},M=async(e,s,r,t,l,a)=>{await u.update(e,{name:s,grade:r,published:l,orden:a}),V(t-1),b()},A=async(e,s)=>{await u.remove(e),V(s-1),b()},D=async(e,s,r)=>{await u.create({name:e,level:s,totalChildren:1,parent:r,published:!0}),null==r&&b(),V(s-1)};return(0,l.useEffect)(()=>{d(null),o(null),p(null),g(null)},[a]),(0,l.useEffect)(()=>{n&&(o(null),p(null),g(null))},[n]),(0,l.useEffect)(()=>{c&&(p(null),g(null))},[c]),(0,l.useEffect)(()=>{x&&g(null)},[x]),(0,t.jsx)(m.Provider,{value:{courses:f,CourseMethods:{setChoosedLvl1:i,setChoosedLvl2:d,setChoosedLvl3:o,setChoosedLvl4:p,setChoosedLvl5:g,refetchLvl1:k,refetchLvl2:T,refetchLvl3:_,refetchLvl4:R,updateFunction:M,removeFunction:A,createFunction:D,setChoosedCourse:r},lvl1:N,choosedLvl1:a,lvl2:S,choosedLvl2:n,lvl3:L,choosedLvl3:c,lvl4:P,choosedLvl4:x,choosedCourse:s},...e})};var j=r(7763),g=r(4100);let f=e=>{let{item:s,isNew:r,handleCourse:n}=e,[o,u]=(0,l.useState)(s.published),[h,m]=(0,l.useState)(!1),{register:p,handleSubmit:f,formState:{errors:v}}=(0,j.cI)(),{CourseMethods:y}=x(),b=e=>{y.updateFunction(s.id,e.name,e.grade,1,o,s.orden),m(!1)},N=()=>{u(!o),y.updateFunction(s.id,s.name,s.grade,1,!o,s.orden)},w=async()=>{let e=await (0,g.pl)("את בטוחה שאת רוצה למחוק?","אם תלחצי כן לא תוכלי לשחזר את הקובץ והוא ימחק באופן סופי");e&&y.removeFunction(s.id,1)};return(0,t.jsxs)("div",{className:"rounded-md relative ".concat(h?"editMode":""," relative ").concat(r?"bg-white":"bg-green/10"," myShadowCard cursor-pointer"),style:{height:"300px",width:"300px"},children:[h&&(0,t.jsx)("span",{className:"absolute m-4 text-white",onClick:()=>m(!1),children:"X"}),(0,t.jsx)("div",{className:"text-center h-full flex justify-center items-center",children:(0,t.jsx)("div",{children:r?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"bg-gray p-8 rounded-full",onClick:()=>n(),children:(0,t.jsx)(d(),{src:"/images/+.svg",width:19,height:15,alt:"+"})})}):(0,t.jsx)(t.Fragment,{children:h?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("form",{onSubmit:f(b),children:[(0,t.jsx)("input",{...p("grade"),type:"text",placeholder:"כיתה",className:"px-2 rounded-md py-2 m-1 text-black"}),(0,t.jsx)("input",{...p("name"),type:"text",placeholder:"שם הקורס",className:"px-2 rounded-md py-2 m-1 text-black"}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{className:"bg-primary text-white mt-2 px-4 py-2 rounded-lg",type:"submit",children:"שמירה"})})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Z,{children:s.grade}),(0,t.jsx)(i.Z,{className:"text-xl",children:s.name})]})})})}),r?(0,t.jsx)("div",{className:"bg-gray absolute rounded-b-md bottom-0 w-full flex text-center items-center justify-center py-1 h-16"}):(0,t.jsx)("div",{className:"bg-green/30 absolute rounded-b-md bottom-0 w-full flex text-center items-center justify-center py-1 h-16",children:(0,t.jsxs)("div",{className:"grid grid-cols-12 w-full mr-5 mt-2 mb-2",children:[(0,t.jsxs)("div",{className:"col-span-8 flex gap-4",children:[(0,t.jsx)("div",{className:"bg-white rounded-full cursor-pointer flex justify-center p-4",onClick:()=>m(!h),children:(0,t.jsx)(d(),{src:"/images/draw.svg",width:15,height:15,alt:"draw"})}),(0,t.jsx)("div",{className:"bg-white rounded-full  cursor-pointer flex justify-center p-4",onClick:()=>w(),children:(0,t.jsx)(d(),{src:"/images/trash.svg",width:19,height:15,alt:"draw"})})]}),(0,t.jsx)("div",{className:"col-span-4 items-center flex justify-center",children:(0,t.jsx)(c.Z,{onChange:N,checked:o})})]})})]})},v=e=>{let{placeholder:s,...r}=e;return(0,t.jsxs)("div",{className:"flex border border-black/50 px-2 rounded-md",children:[(0,t.jsx)("input",{placeholder:s,...r,className:"hover:border-none"}),(0,t.jsx)(d(),{src:"/images/search.svg",width:15,height:15,alt:"search",priority:!0})]})};var y=r(1163);let b=e=>{let{item:s,choosedLVl:r,isExercise:a}=e,i=(0,y.useRouter)(),[n,c]=(0,l.useState)(!1),{CourseMethods:o}=x(),{register:u,handleSubmit:h,watch:m,formState:{errors:p}}=(0,j.cI)(),f=e=>o.updateFunction(s.id,e.name,s.grade,s.level,s.published,s.orden),v=async()=>{let e=await (0,g.pl)("את בטוחה שאת רוצה למחוק?","אם תלחצי כן לא תוכלי לשחזר את הקובץ והוא ימחק באופן סופי");e&&o.removeFunction(s.id,s.level)};return(0,t.jsxs)("div",{className:"border-t border-gray ",children:[(0,t.jsxs)("div",{className:"flex py-2 m-auto px-4",children:[(0,t.jsx)("div",{className:"w-full flex items-center cursor-pointer",onClick:()=>r(s.id),children:(0,t.jsx)("p",{children:s.name})}),(0,t.jsxs)("div",{className:"flex gap-2 ",children:[a&&(0,t.jsx)("div",{className:" border border-black rounded-full flex justify-center w-12 h-12",children:(0,t.jsx)(d(),{src:"images/eye.svg",width:30,height:30,priority:!0,alt:"trash",className:" cursor-pointer rounded-lg p-1",onClick:()=>i.push("/admin/createModule/".concat(s.id))})}),(0,t.jsx)("div",{className:"border border-black rounded-full flex justify-center w-12 h-12",children:(0,t.jsx)(d(),{src:"images/draw.svg",width:25,height:2,priority:!0,alt:"draw",className:" cursor-pointer rounded-lg p-1",onClick:()=>c(!n)})}),(0,t.jsx)("div",{className:"border border-black rounded-full flex justify-center w-12 h-12",children:(0,t.jsx)(d(),{src:"images/trash.svg",width:25,height:25,priority:!0,alt:"trash",className:" cursor-pointer rounded-lg p-1",onClick:()=>v()})})]})]}),n&&(0,t.jsxs)("form",{className:"flex pt-4 m-auto px-4 py-4",children:[(0,t.jsx)("div",{className:"w-full flex items-center",children:(0,t.jsx)("input",{...u("name"),type:"text",placeholder:"עריכה",className:"border border-gray p-2 rounded-md"})}),(0,t.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,t.jsx)("div",{className:" rounded-full flex justify-center w-12 h-12",style:{backgroundColor:"#31B0F2"},children:(0,t.jsx)(d(),{src:"images/vWhite.svg",width:25,height:25,priority:!0,alt:"draw",className:" cursor-pointer rounded-lg p-1",onClick:h(f)})}),(0,t.jsx)("div",{className:" rounded-full flex justify-center w-12 h-12",style:{backgroundColor:"rgba(49, 176, 242, 0.3)"},children:(0,t.jsx)(d(),{src:"images/xBlue.svg",width:25,height:25,priority:!0,alt:"trash",className:" cursor-pointer rounded-lg p-1",onClick:()=>c(!1)})})]})]})]})};var N=r(5948);let w=e=>{let{data:s,title:r,level:a,parentId:i,choosedLVl:n,isExercise:c}=e,{CourseMethods:o}=x(),[u,h]=(0,l.useState)(!1),[m,p]=(0,l.useState)(""),[g,f]=(0,l.useState)([]),{register:y,handleSubmit:w}=(0,j.cI)(),C=e=>{o.createFunction(e.name,a,i)};(0,l.useEffect)(()=>{m?f(s.filter(e=>e.name.includes(m))):f([])},[s,m]);let k=e=>{if(!e.destination)return;let r=Array.from(g.length>0?g:s),[t]=r.splice(e.source.index,1);if(r.splice(e.destination.index,0,t),g.length>0){let e=r.map((e,s)=>({...e,orden:s+1}));f(e)}else{let e=r.map((e,s)=>({...e,orden:s+1}));console.log("updatedData",e),e.map(e=>{o.updateFunction(e.id,e.name,e.grade,e.level,e.published,e.orden)})}};return(0,t.jsx)(N.Z5,{onDragEnd:k,children:(0,t.jsx)("div",{className:"border border-black/20 rounded-md",children:(0,t.jsxs)("div",{className:"",children:[(0,t.jsx)("div",{className:"flex w-full border-b-2 border-black/10 py-2",children:(0,t.jsx)("div",{className:"flex w-full m-auto px-4",children:(0,t.jsx)("p",{children:r})})}),(0,t.jsxs)("div",{className:"flex py-4 m-auto px-4",children:[(0,t.jsx)("div",{style:{backgroundColor:"#31B0F2"},className:"w-11 h-10 rounded-lg text-center items-center justify-center cursor-pointer  flex",onClick:()=>h(!u),children:(0,t.jsx)(d(),{src:"/images/+.svg",width:20,height:20,alt:"add",priority:!0})}),(0,t.jsx)("div",{className:"w-full flex justify-end",children:(0,t.jsx)(v,{placeholder:"חיפוש",value:m,onChange:e=>p(e.target.value)})})]}),u&&(c?(0,t.jsxs)("div",{className:"m-auto px-4",children:[(0,t.jsx)("div",{className:"flex py-2",children:(0,t.jsx)("p",{children:"שם התרגיל"})}),(0,t.jsxs)("form",{onSubmit:w(C),className:"grid grid-cols-8 gap-4",children:[(0,t.jsx)("div",{className:"col-span-12",children:(0,t.jsx)("input",{...y("name"),className:"border border-primary/30 rounded-md w-full px-2 py-2",placeholder:"שם"})}),(0,t.jsx)("div",{className:"col-span-12",children:(0,t.jsx)("button",{className:"bg-green/40  w-full rounded-md text-white  hover:bg-green/70 py-2",style:{backgroundColor:"#31B0F2"},children:"בניית תרגיל"})})]})]}):(0,t.jsxs)("div",{className:"m-auto px-4",children:[(0,t.jsx)("div",{className:"flex",children:(0,t.jsxs)("p",{children:["שם ה",r]})}),(0,t.jsxs)("form",{onSubmit:w(C),className:"grid grid-cols-8 gap-4",children:[(0,t.jsx)("div",{className:"col-span-6",children:(0,t.jsx)("input",{...y("name"),className:"border border-primary/30 rounded-md w-full px-2 py-2",placeholder:"שם"})}),(0,t.jsx)("div",{className:"col-span-2",children:(0,t.jsx)("button",{className:"bg-green/40  w-full rounded-md text-white  hover:bg-green/70 py-2",style:{backgroundColor:"#31B0F2"},children:"שמירה"})})]})]})),(0,t.jsx)("div",{className:"overflow-auto py-2",children:(0,t.jsx)(N.bK,{droppableId:"droppable",children:e=>{var r;return(0,t.jsxs)("div",{...e.droppableProps,ref:e.innerRef,children:[null===(r=g.length>0?g:s)||void 0===r?void 0:r.map((e,s)=>(0,t.jsx)(N._l,{draggableId:e.id.toString(),index:s,children:r=>(0,t.jsx)("div",{ref:r.innerRef,...r.draggableProps,...r.dragHandleProps,children:(0,t.jsx)(b,{item:e,choosedLVl:n,isExercise:c},s)})},e.id)),e.placeholder]})}})})]})})})},C=()=>{let{CourseMethods:e,lvl1:s,lvl2:r,lvl3:l,lvl4:a,choosedLvl1:i,choosedLvl2:n,choosedLvl3:d,choosedLvl4:c}=x();return(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4 px-12 ",children:[(null==s?void 0:s.children)&&(0,t.jsx)(w,{title:"פרקים",data:null==s?void 0:s.children,level:2,parentId:i,choosedLVl:e.setChoosedLvl2,isExercise:!1}),(null==r?void 0:r.children)&&(0,t.jsx)(w,{title:"יחידות",data:r.children,level:3,parentId:n,choosedLVl:e.setChoosedLvl3,isExercise:!1}),(null==l?void 0:l.children)&&(0,t.jsx)(w,{title:"נושאים",data:l.children,level:4,parentId:d,choosedLVl:e.setChoosedLvl4,isExercise:!1}),(null==a?void 0:a.children)&&(0,t.jsx)(w,{title:"תרגילים",data:a.children,level:5,parentId:c,choosedLVl:e.setChoosedLvl5,isExercise:!0})]})};var k=r(1559),S=r(521);let E=()=>{let[e,s]=(0,l.useState)(!1),{register:r,handleSubmit:a,formState:{errors:n}}=(0,j.cI)(),{courses:d,CourseMethods:c,choosedLvl1:o,choosedCourse:u}=x(),h=()=>c.createFunction("",1,null),m=e=>{c.setChoosedCourse(e.name),c.setChoosedLvl1(e.id)};return(0,t.jsx)(k.Z,{title:"courses",children:(0,t.jsx)(S.Z,{children:(0,t.jsxs)("div",{className:"h-full",style:{backgroundColor:"#F0FBFF"},children:[(0,t.jsxs)("div",{className:"mr-12 mb-10",children:[(0,t.jsx)(i.Z,{className:"pt-12 pb-4",children:"תוכן העניינים"}),(0,t.jsxs)("div",{className:"gap-8 flex overflow-x-auto w-full",children:[(0,t.jsx)("div",{children:(0,t.jsx)(f,{item:{id:0,color:"",level:1,published:!0,name:"",grade:"",orden:0,image:""},isNew:!0,handleCourse:h})}),null==d?void 0:d.map((e,s)=>(0,t.jsx)("div",{onClick:()=>m(e),className:"flex-shrink-0 ",children:(0,t.jsx)(f,{item:e,isNew:!1,handleCourse:h},s)},s))]})]}),(0,t.jsxs)("div",{style:{minHeight:"50%"},className:"bg-white pb-12",children:[u&&(0,t.jsx)("div",{className:"px-12 py-6",children:(0,t.jsxs)("p",{children:["עריכת קורס: ",u," "]})}),o&&(0,t.jsx)(C,{})]})]})})})},F=()=>(0,t.jsx)(p,{children:(0,t.jsx)(E,{})});F.isOnlyAdmin=!0,F.isOnlyUser=!1;var T=F},521:function(e,s,r){"use strict";r.d(s,{Z:function(){return h}});var t=r(5893);r(7294);var l=r(5675),a=r.n(l),i=r(1664),n=r.n(i);let d=()=>(0,t.jsxs)("header",{className:"bg-primary w-full py-6 px-6 grid grid-cols-2",children:[(0,t.jsxs)("div",{className:"flex justify-start items-center",children:[(0,t.jsx)(a(),{priority:!0,width:48,height:48,src:"/images/header/avatars/avatar.svg",alt:"Sary"}),(0,t.jsx)("p",{className:"text-center text-white px-4",children:"אורלי"})]}),(0,t.jsxs)("div",{className:"flex justify-end",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(n(),{href:"/admin/tableOfContents",className:"flex justify-center items-center px-4",children:(0,t.jsx)(a(),{priority:!0,width:28,height:20,src:"/images/header/paper.svg",alt:"Sary"})}),(0,t.jsx)(n(),{href:"/admin/tableOfContents",className:"flex justify-center items-center px-4",children:(0,t.jsx)(a(),{priority:!0,width:28,height:20,src:"/images/header/forum.svg",alt:"Sary"})}),(0,t.jsxs)(n(),{href:"/admin/tableOfContents",className:"flex justify-center items-center pr-4 relative",children:[(0,t.jsx)(a(),{priority:!0,width:28,height:20,src:"/images/header/bell.svg",alt:"Sary"}),(0,t.jsx)("div",{className:"items-center rounded-full bg-red text-white absolute left-4 px-1",children:(0,t.jsx)("p",{children:"12"})})]})]}),(0,t.jsxs)("div",{className:"flex justify-between px-8",children:[(0,t.jsx)("div",{className:"w-1/2 border-r",style:{borderColor:"#F3F6F9"}}),(0,t.jsx)("div",{className:"w-1/2"})]}),(0,t.jsx)("div",{className:"flex",children:(0,t.jsxs)(n(),{href:"/admin/tableOfContents",className:"flex",children:[(0,t.jsx)(a(),{priority:!0,width:50,height:37,src:"/images/header/logo.svg",alt:"Sary"}),(0,t.jsx)(a(),{priority:!0,width:180,height:37,src:"/images/header/logoTitle.svg",alt:"Sary",className:"items-center justify-center pt-5 px-4"})]})})]})]}),c=[{id:2,title:"תוכן העניינים",icon:"../images/sidebar/summary.svg",href:"/admin/tableOfContents"}],o=()=>(0,t.jsx)("aside",{className:"bg-primary flex flex-col justify-between",style:{height:"89vh"},children:(0,t.jsx)("div",{className:"pt-12",children:null==c?void 0:c.map((e,s)=>(0,t.jsx)("div",{className:"hover:bg-white/10 py-2 m-4 rounded-lg",children:(0,t.jsxs)(n(),{href:e.href,className:"",children:[(0,t.jsx)(a(),{priority:!0,width:30,height:37,src:e.icon,alt:"Sary",className:"m-auto pt-2"}),(0,t.jsx)("p",{className:"pt-2 text-white text-center",children:e.title})]})},s))})}),u=e=>{let{children:s}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)(d,{}),(0,t.jsxs)("div",{className:"grid grid-cols-12",children:[(0,t.jsx)("div",{className:"col-span-1",children:(0,t.jsx)(o,{})}),(0,t.jsx)("div",{className:"col-span-11",children:s})]})]})};var h=u},1559:function(e,s,r){"use strict";var t=r(5893),l=r(9008),a=r.n(l),i=r(1163),n=r(3454);let d=e=>"".concat(e," | Matah"),c=e=>{let{title:s,description:r,image:l,children:c}=e,{asPath:o}=(0,i.useRouter)(),u="".concat(n.env.APP_URL).concat(o);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a(),{children:[(0,t.jsx)("title",{itemProp:"headline",children:d(s)}),r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("meta",{itemProp:"description",name:"description",content:r}),(0,t.jsx)("link",{rel:"canonical",href:u}),(0,t.jsx)("meta",{property:"og:locale",content:"he"}),(0,t.jsx)("meta",{property:"og:title",content:d(s)}),(0,t.jsx)("meta",{property:"og:url",content:u}),(0,t.jsx)("meta",{property:"og:image",content:l||"/favicon.svg"}),(0,t.jsx)("meta",{property:"og:description",content:r})]}):(0,t.jsx)("meta",{name:"robots",content:"noindex, nofollow"})]}),c]})};s.Z=c},2667:function(e,s,r){"use strict";var t=r(5893);r(7294);var l=r(6010);let a=e=>{let{className:s,children:r}=e;return(0,t.jsx)("h1",{className:(0,l.Z)("font-semibold text-3xl",s),children:r})};s.Z=a},6693:function(e,s,r){"use strict";var t=r(5893);r(7294);let l=e=>{let{children:s,className:r=""}=e;return(0,t.jsx)("h2",{className:"SubHeading ".concat(r),children:s})};s.Z=l},4100:function(e,s,r){"use strict";r.d(s,{Cf:function(){return i},KO:function(){return a},pl:function(){return n}});var t=r(6455),l=r.n(t);let a=(e,s)=>{l().fire({title:e,icon:"success",text:s,timer:3e3,showConfirmButton:!1})},i=(e,s)=>{l().fire({title:e,text:s,icon:"error",timer:3e3,showConfirmButton:!1})},n=(e,s)=>l().fire({title:e,text:s,icon:"question",showCancelButton:!0,confirmButtonText:"מחיקה",cancelButtonText:"ביטול"}).then(e=>e.isConfirmed)}},function(e){e.O(0,[630,661,536,790,462,774,888,179],function(){return e(e.s=8790)}),_N_E=e.O()}]);