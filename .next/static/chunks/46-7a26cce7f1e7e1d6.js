"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[46],{7041:function(e,t,l){l.d(t,{Z:function(){return b}});var s=l(5893),r=l(1559),n=l(7294),c=l(521),o=l(6656),a=l(6010);let i=e=>{let{children:t,className:l,...r}=e;return(0,s.jsx)("button",{...r,className:(0,a.Z)("rounded-x1 font-medium px-10 py-2 shadow",l),children:t})};var d=l(2667);let u=e=>{let{value:t,register:l,col:r,row:c,setValue:o}=e,a=e=>{let t=e.target.innerText;o("collectionsRows[".concat(r,"].collectionRow[").concat(c,"].collectionValues"),t)};return(0,n.useEffect)(()=>{o("collectionsRows[".concat(r,"].collectionRow[").concat(c,"].orden"),c),o("collectionsRows[".concat(r,"].collectionRow[").concat(c,"].module_type"),"text"),o("collectionsRows[".concat(r,"].collectionRow[").concat(c,"].collectionAnswers"),[])},[r,c,o]),(0,s.jsx)("th",{className:"pt-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{contentEditable:!0,onInput:a,dangerouslySetInnerHTML:{__html:t}}),(0,s.jsx)("input",{type:"hidden",...l("collectionsRows[".concat(r,"].collectionRow[").concat(c,"].collectionValues"),{value:[{value:t}]})})]})})},h=e=>{let{answer:t,placeholder:l,register:r,col:c,row:o,setValue:a}=e;return(0,n.useEffect)(()=>{a("collectionsRows[".concat(c,"].collectionRow[").concat(o,"].orden"),o),a("collectionsRows[".concat(c,"].collectionRow[").concat(o,"].module_type"),"input"),a("collectionsRows[".concat(c,"].collectionRow[").concat(o,"].collectionValues"),[])},[c,o,a]),(0,s.jsx)("th",{className:"bg-white pt-4",children:(0,s.jsx)("input",{type:"text",placeholder:l,className:"w-28 px-4 h-full py-2 border border-gray rounded-md",...r("collectionsRows[".concat(c,"].collectionRow[").concat(o,"].collectionAnswers[0].value"),{value:t})})})};var x=l(7763);let m=e=>{let{placeholder:t,options:l,answer:r,col:c,row:a,register:i,setValue:d,control:u}=e,h=null==l?void 0:l.map(e=>({value:e.value,label:e.value})),m=e=>e?h.find(t=>t.value===e):{value:r,label:r};return(0,n.useEffect)(()=>{d("collectionsRows[".concat(c,"].collectionRow[").concat(a,"].orden"),a),d("collectionsRows[".concat(c,"].collectionRow[").concat(a,"].collectionAnswers[0].value"),r),d("collectionsRows[".concat(c,"].collectionRow[").concat(a,"].collectionValues"),l),d("collectionsRows[".concat(c,"].collectionRow[").concat(a,"].module_type"),"selectbox")},[r,c,l,a,d]),(0,s.jsx)("th",{className:"bg-white pt-4",children:(0,s.jsx)(x.Qr,{control:u,name:"collectionsRows[".concat(c,"].collectionRow[").concat(a,"].collectionAnswers[0].value"),rules:{required:"צריך לבחור את התשובה"},render:e=>{let{field:{onChange:l,value:r},fieldState:{error:n}}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.ZP,{placeholder:t,options:h,value:m(r),onChange:e=>l(null==e?void 0:e.value),className:"ml-4 mr-4"}),n&&(0,s.jsx)("div",{style:{color:"red"},children:n.message})]})}})})},p=e=>{let{exercises:t,register:l,orden:r,setValue:c,control:o}=e;return(0,n.useEffect)(()=>{c("collectionsRows[".concat(r,"].orden"),r)},[r,c]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("th",{className:"bg-primary text-white",children:r}),t.collectionRow.map((e,t)=>"text"==e.module_type?(0,s.jsx)(u,{value:e.collectionValues[0].value,register:l,col:r,row:e.orden,setValue:c},t):"input"==e.module_type?(0,s.jsx)(h,{answer:e.collectionAnswers.length>0?e.collectionAnswers[0].value:"",placeholder:e.placeholder||"",register:l,col:r,row:e.orden,setValue:c},t):"selectbox"==e.module_type?(0,s.jsx)(m,{placeholder:e.placeholder||"",options:e.collectionValues,answer:e.collectionAnswers.length>0?e.collectionAnswers[0].value:"",register:l,col:r,row:e.orden,setValue:c,control:o},t):void 0),(0,s.jsx)("th",{className:"bg-white",children:(0,s.jsxs)("div",{className:"flex gap-6 items-center justify-center pt-4",children:[(0,s.jsx)("div",{className:"border rounded-lg w-16 text-sm text-center leading-none py-1 cursor-pointer",children:(0,s.jsx)("p",{children:"העלאת קובץ הסבר"})}),(0,s.jsx)("div",{className:"border rounded-lg w-16 text-sm text-center leading-none py-1 cursor-pointer",children:(0,s.jsx)("p",{children:"העלאת קובץ וידיאו"})})]})})]})};var f=l(1163),j=l(3609),v=l(6693);let w=e=>{let{item:t,register:l,setValue:r,index:c}=e;return(0,n.useEffect)(()=>{r("collectionsCols[".concat(t.orden,"].orden"),c)},[t.orden,c,r]),(0,s.jsx)("div",{className:"p-1",children:(0,s.jsx)("input",{value:t.title,placeholder:"כותרת",className:"w-36 rounded-md px-2",...l("collectionsCols[".concat(t.orden,"].title"))})})};var g=l(4100);let y=[{value:1,label:"מודול ראשון"},{value:2,label:"מודול שני"},{value:3,label:"מודול שלישי"}],N=()=>{var e,t;let[l,a]=(0,n.useState)(null),[u,h]=(0,n.useState)(),{ExerciseMethods:m,exercises:N}=(0,j.t)(),b=(0,f.useRouter)(),{moduleId:R}=b.query,{register:C,handleSubmit:S,watch:E,formState:{errors:Z},setValue:_,control:F}=(0,x.cI)(),O=e=>{m.createMoudle(e)},V=e=>{e.target.files&&e.target.files.length>0&&a(e.target.files[0])},A=async e=>{if(e.preventDefault(),l)try{m.uploadXml(l)}catch(e){console.error("Error:",e)}else console.error("No file selected")},T=(0,n.useCallback)(async()=>{l&&await (0,g.pl)("האם תרצו להריץ את הקובץ?","")&&m.uploadXml(l)},[m,l]);return(0,n.useEffect)(()=>{N&&(_("title",null==N?void 0:N.title),_("description",null==N?void 0:N.description),_("description2",null==N?void 0:N.description2),_("courseId",R))},[N,R,_]),(0,n.useEffect)(()=>{T()},[T,l]),(0,s.jsx)(r.Z,{title:"create Module",children:(0,s.jsxs)(c.Z,{children:[(0,s.jsxs)("div",{className:"mr-12",children:[(0,s.jsx)(d.Z,{children:null==N?void 0:N.title}),(0,s.jsx)(v.Z,{children:null==N?void 0:N.description}),(0,s.jsx)("div",{className:"border-b border-solid border-2 border-gray-400"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 py-10 px-2",children:[(0,s.jsx)(x.Qr,{control:F,name:"module",rules:{required:"צריך לבחור מודול"},render:e=>{let{field:{onChange:t,value:l},fieldState:{error:r}}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.ZP,{placeholder:"בחירת מודול",options:y,onChange:e=>t(null==e?void 0:e.value),className:"w-96"}),r&&(0,s.jsx)("div",{style:{color:"red"},children:r.message})]})}}),(0,s.jsxs)("form",{onSubmit:A,encType:"multipart/form-data",className:"justify-end items-end flex gap-12",children:[(null==N?void 0:N.title)&&R&&(0,s.jsx)(i,{className:"bg-red text-white rounded-md",onClick:()=>m.deleteModule(R[0]),children:"מחיקה"}),(0,s.jsx)("label",{htmlFor:"fileInput",className:"w-56 bg-primary flex items-center justify-center px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-md cursor-pointer",children:"בחר קובץ"}),(0,s.jsx)("input",{id:"fileInput",type:"file",onChange:V,className:"hidden"}),(0,s.jsx)(i,{className:"bg-green text-white rounded-md",onClick:S(O),children:"שמור"})]})]})]}),(0,s.jsx)("form",{onSubmit:S(O),className:"mr-12",children:(0,s.jsx)("table",{className:"w-full",children:(0,s.jsxs)("tbody",{className:"",children:[(0,s.jsxs)("tr",{className:"heading bg-primary",children:[(0,s.jsx)("div",{className:"text-center justify-center text-white"}),null==N?void 0:null===(e=N.collectionsCols)||void 0===e?void 0:e.map((e,t)=>(0,s.jsx)("th",{className:"",children:(0,s.jsx)(w,{item:e,index:t+1,register:C,setValue:_})},t)),(0,s.jsx)("div",{className:"text-center justify-center text-white "})]}),null==N?void 0:null===(t=N.collectionsRows)||void 0===t?void 0:t.map((e,t)=>(0,s.jsx)("tr",{children:(0,s.jsx)(p,{exercises:e,register:C,orden:e.orden,setValue:_,control:F},t)},t))]})})})]})})};var b=N},521:function(e,t,l){l.d(t,{Z:function(){return h}});var s=l(5893);l(7294);var r=l(5675),n=l.n(r),c=l(1664),o=l.n(c);let a=()=>(0,s.jsxs)("header",{className:"bg-primary w-full py-6 px-6 grid grid-cols-2",children:[(0,s.jsxs)("div",{className:"flex justify-start items-center",children:[(0,s.jsx)(n(),{priority:!0,width:48,height:48,src:"/images/header/avatars/avatar.svg",alt:"Sary"}),(0,s.jsx)("p",{className:"text-center text-white px-4",children:"אורלי"})]}),(0,s.jsxs)("div",{className:"flex justify-end",children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(o(),{href:"/admin/tableOfContents",className:"flex justify-center items-center px-4",children:(0,s.jsx)(n(),{priority:!0,width:28,height:20,src:"/images/header/paper.svg",alt:"Sary"})}),(0,s.jsx)(o(),{href:"/admin/tableOfContents",className:"flex justify-center items-center px-4",children:(0,s.jsx)(n(),{priority:!0,width:28,height:20,src:"/images/header/forum.svg",alt:"Sary"})}),(0,s.jsxs)(o(),{href:"/admin/tableOfContents",className:"flex justify-center items-center pr-4 relative",children:[(0,s.jsx)(n(),{priority:!0,width:28,height:20,src:"/images/header/bell.svg",alt:"Sary"}),(0,s.jsx)("div",{className:"items-center rounded-full bg-red text-white absolute left-4 px-1",children:(0,s.jsx)("p",{children:"12"})})]})]}),(0,s.jsxs)("div",{className:"flex justify-between px-8",children:[(0,s.jsx)("div",{className:"w-1/2 border-r",style:{borderColor:"#F3F6F9"}}),(0,s.jsx)("div",{className:"w-1/2"})]}),(0,s.jsx)("div",{className:"flex",children:(0,s.jsxs)(o(),{href:"/admin/tableOfContents",className:"flex",children:[(0,s.jsx)(n(),{priority:!0,width:50,height:37,src:"/images/header/logo.svg",alt:"Sary"}),(0,s.jsx)(n(),{priority:!0,width:180,height:37,src:"/images/header/logoTitle.svg",alt:"Sary",className:"items-center justify-center pt-5 px-4"})]})})]})]}),i=[{id:2,title:"תוכן העניינים",icon:"../images/sidebar/summary.svg",href:"/admin/tableOfContents"}],d=()=>(0,s.jsx)("aside",{className:"bg-primary flex flex-col justify-between",style:{height:"89vh"},children:(0,s.jsx)("div",{className:"pt-12",children:null==i?void 0:i.map((e,t)=>(0,s.jsx)("div",{className:"hover:bg-white/10 py-2 m-4 rounded-lg",children:(0,s.jsxs)(o(),{href:e.href,className:"",children:[(0,s.jsx)(n(),{priority:!0,width:30,height:37,src:e.icon,alt:"Sary",className:"m-auto pt-2"}),(0,s.jsx)("p",{className:"pt-2 text-white text-center",children:e.title})]})},t))})}),u=e=>{let{children:t}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)(a,{}),(0,s.jsxs)("div",{className:"grid grid-cols-12",children:[(0,s.jsx)("div",{className:"col-span-1",children:(0,s.jsx)(d,{})}),(0,s.jsx)("div",{className:"col-span-11",children:t})]})]})};var h=u},1559:function(e,t,l){var s=l(5893),r=l(9008),n=l.n(r),c=l(1163),o=l(3454);let a=e=>"".concat(e," | Matah"),i=e=>{let{title:t,description:l,image:r,children:i}=e,{asPath:d}=(0,c.useRouter)(),u="".concat(o.env.APP_URL).concat(d);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n(),{children:[(0,s.jsx)("title",{itemProp:"headline",children:a(t)}),l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("meta",{itemProp:"description",name:"description",content:l}),(0,s.jsx)("link",{rel:"canonical",href:u}),(0,s.jsx)("meta",{property:"og:locale",content:"he"}),(0,s.jsx)("meta",{property:"og:title",content:a(t)}),(0,s.jsx)("meta",{property:"og:url",content:u}),(0,s.jsx)("meta",{property:"og:image",content:r||"/favicon.svg"}),(0,s.jsx)("meta",{property:"og:description",content:l})]}):(0,s.jsx)("meta",{name:"robots",content:"noindex, nofollow"})]}),i]})};t.Z=i},2667:function(e,t,l){var s=l(5893);l(7294);var r=l(6010);let n=e=>{let{className:t,children:l}=e;return(0,s.jsx)("h1",{className:(0,r.Z)("font-semibold text-3xl",t),children:l})};t.Z=n},6693:function(e,t,l){var s=l(5893);l(7294);let r=e=>{let{children:t,className:l=""}=e;return(0,s.jsx)("h2",{className:"SubHeading ".concat(l),children:t})};t.Z=r},3609:function(e,t,l){l.d(t,{A:function(){return h},t:function(){return u}});var s=l(5893),r=l(7294),n=l(9420),c=l(6154);let o={async create(e){console.log("data",JSON.stringify(e));let t=await (0,n.e)({url:"/exercises",method:"POST",data:e});return t.data},async getOne(e){let t=await (0,n.e)({url:"/exercises/".concat(e),method:"GET"});return t.data},async parseXlFile(e){let t=new FormData;t.append("file",e);let l=await c.Z.post("http://localhost:4000/courses/uploadXl",t);return l.data},async delete(e){let t=await (0,n.e)({url:"/exercises/".concat(e),method:"DELETE"});return t.data}};var a=l(1163),i=l(4100);let d=(0,r.createContext)(null),u=()=>{let e=(0,r.useContext)(d);if(!e)throw Error('Can not run without "ExerciseProvider"');return e},h=e=>{let[t,l]=(0,r.useState)(),[n,c]=(0,r.useState)(!1),[u,h]=(0,r.useState)(),x=(0,a.useRouter)(),m=x.query.moduleId,p=async e=>{c(!0);try{let t=await o.getOne(e);t&&h(t)}catch(e){console.log("error",e)}finally{c(!1)}},f=async e=>{c(!0);try{let t=await o.parseXlFile(e);h(t)}catch(e){console.log("error",e),(0,i.Cf)("שגיאה בלפרסס את המודול","אנא פנה לצוות דיגירטייד")}finally{c(!1)}},j=async e=>{c(!0);try{await o.create(e),setTimeout(()=>{p(m),(0,i.KO)("תרגיל נשמר בהצלחה!","")},2e3)}catch(e){console.log("error",e)}finally{c(!1)}},v=async e=>{let t=await (0,i.pl)("האם תרצו למחוק את המודול הזה?","");if(t){c(!0);try{await o.delete(e),await p(m)}catch(e){console.log("error",e)}finally{c(!1)}}};return(0,r.useEffect)(()=>{let e=x.query.moduleId;p(e)},[x.query.moduleId]),(0,s.jsx)(d.Provider,{value:{exercises:u,ExerciseMethods:{setId:l,uploadXml:f,createMoudle:j,deleteModule:v},loading:n},...e})}},4100:function(e,t,l){l.d(t,{Cf:function(){return c},KO:function(){return n},pl:function(){return o}});var s=l(6455),r=l.n(s);let n=(e,t)=>{r().fire({title:e,icon:"success",text:t,timer:3e3,showConfirmButton:!1})},c=(e,t)=>{r().fire({title:e,text:t,icon:"error",timer:3e3,showConfirmButton:!1})},o=(e,t)=>r().fire({title:e,text:t,icon:"question",showCancelButton:!0,confirmButtonText:"מחיקה",cancelButtonText:"ביטול"}).then(e=>e.isConfirmed)}}]);